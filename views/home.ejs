<h1 class="mt-5">Home</h1>
<p class="lead mb-3">
	Welcome
	<a class="btn btn-info" href="/users/<%= user.id %>"><%= user.name %></a>
</p>

<%- include ("partials/messages") %>

<!-- Button trigger modal -->
<button
	type="button"
	class="btn btn-primary"
	data-bs-toggle="modal"
	data-bs-target="#composePost"
>
	Post
</button>

<!-- Modal -->
<%- include ("modals/post") %>

<a href="/users/logout" class="btn btn-danger">Logout</a>

<br /><br />
<% for(let i=0; i < posts.length; i++) {%>
<div class="card mb-3">
	<h3 class="card-header"><a href="/users/<%= posts[i].id %>"><%= posts[i].name %></a></h3>
	<div class="card-body">
		<h4 class="card-text"><%= posts[i].text %></h4>
	</div>
	<div class="form-group">
		<form
		id="formLike<%=i%>"
		action="/likes/<%= posts[i].post_id %>/users/<%= user.id %>"
		method="POST"
		>
			<button
				type="submit"
				id="likeButton<%=i%>"
				form="formLike<%=i%>"
				class="btn btn-primary"
			>
				Like
			</button>
		</form>
	</div>
	
	<ul class="list-group list-group-flush">
		<li class="list-group-item"><span><%= posts[i].nLikes %></span> Likes</li>
		<li class="list-group-item"><span><%= posts[i].nComments %></span><a href="/comments/<%= posts[i].post_id %>" display: block height: 100% > Comments</a></li>
	  </ul>
		
	<div class="card-footer text-muted">
		<h6><%= posts[i].created_at %></h6>
	</div>
</div>
<% } %>

<br>
<div>
	<ul class="pagination">
		<!-- prev arrow -->
		<% if(page > 1) { %> 
			<li class="page-item">
				<a class="page-link" href="/home/?page=<%=page-1%>">&laquo;</a>
	  		</li> 
		<% } %>
	  
	  	<% for(let i = iterator; i <= endingLink; i++) { %>
			<!-- active page -->
			<% if(i === page) { %>
				<li class="page-item active">
					<a class="page-link" href="/home/?page=<%=i%>"><%=i%></a>
				</li>
				<% continue; %>
			<% } %>
			<!-- all other pages -->
				<li class="page-item">
					<a class="page-link" href="/home/?page=<%=i%>"><%=i%></a>
				</li>
		<% } %>
		<!-- next arrow -->
	  	<% if(page < numberOfPages) { %> 
			<li class="page-item">
				<a class="page-link" href="/home/?page=<%=page+1%>">&raquo;</a>
	  		</li> 
		<% } %>
	</ul>
</div>

<a class="btn btn-primary" href="#top">Back to top</a>
<br>

<script src="/javascripts/char-counter.js"></script>
